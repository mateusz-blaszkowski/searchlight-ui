<table ng-cloak
       class="table table-striped table-hover table-rsp table-detail search-results">
  <thead>
  <tr>
    <th class="expander"></th>

    <th class="rsp-p1" translate>Type</th>

    <th ng-if="ctrl.searchSettings.settings.general.all_projects"
        class="rsp-p1"
        translate>
      Project
    </th>
    <th class="rsp-p1" translate>Name</th>
    <th class="actions_column" translate>Actions</th>
  </tr>
  </thead>

  <tbody>

  <tr ng-if='ctrl.queryResponse.error'>
    <td colspan="8" translate>
      {$ ctrl.queryResponse.statusCode | queryStatus $}
    </td>
  </tr>

  <tr ng-if='!ctrl.queryError'
      ng-repeat-start="hit in ctrl.hitsSrc track by ctrl.getSearchlightKey(hit)"
      ng-class="{incache: hit.dirty}">
    <td class="expander">
      <i class="fa fa-chevron-right"
         hz-expand-detail
         duration="200">
      </i>
    </td>

    <td class="rsp-p1 truncate">{$ hit._type | resourceLabeler $}</td>
    <td ng-if="ctrl.searchSettings.settings.general.all_projects"
        class="rsp-p1">
      <span tooltip="{$ hit._source.project_id $}"
            tooltip-placement="top"
            tooltip-popup-delay="500"
            tooltip-trigger="mouseenter">
        {$ hit._source.project_id | keystoneProjectName | noValue$}
      </span>
    </td>

    <td ng-cloak class="rsp-p1">
        <a ng-href="{$ 'project/ngdetails/' + hit._type + '/' + table.registry.getResourceType(hit._type).pathGenerator(hit._source.id) $}">
          <hz-search-highlighter hit="hit"
                                 field="'name'"
                                 default-value="hit._source.name || hit._source.id | noValue">
          </hz-search-highlighter>
      </a>
    </td>

    <td class="actions_column">
      <actions allowed="ctrl.registry.getResourceType(hit._type).itemActions"
               type="row"
               item="hit._source"
               result-handler="ctrl.actionResultHandler">
      </actions>
    </td>

  </tr>

  <tr ng-repeat-end class="detail-row">
    <!--
      Detail-row:
      Contains detailed information on this item.
      Can be toggled using the chevron button.
      Ensure colspan is greater or equal to number of column-headers.
    -->
    <td class="detail" colspan="100">
      <hz-drawer hit="hit" item="hit._source" template-url="ctrl.registry.getResourceType(hit._type).drawerTemplateUrl || ctrl.registry.getDefaultDrawerTemplateUrl()"></hz-drawer>
    </td>
  </tr>

  </tbody>

  <tfoot></tfoot>

</table>
